<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Salesforce Duplicate Detector</title>
  </head>
  <body>
    <h1>Salesforce Duplicate Detector</h1>
    {% if error %}
      <p style="color: red;">{{ error }}</p>
    {% endif %}
    <form method="post" enctype="multipart/form-data">
      <label>Data file (CSV or JSON):
        <input type="file" name="file" required>
      </label><br>
      <label>Match fields (comma separated):
        <input type="text" name="match_fields" required>
      </label><br>
      <label>Master field:
        <input type="text" name="master_field" required>
      </label><br>
      <label>Strategy:
        <select name="strategy">
          <option value="highest">Highest</option>
          <option value="lowest">Lowest</option>
        </select>
      </label><br>
      <button type="submit">Find duplicates</button>
    </form>
    {% if results %}
      <h2>Results</h2>
      {% for item in results %}
        <div>
          <strong>Match key:</strong> {{ item.match_key }}<br>
          <strong>Master:</strong>
          <pre>{{ item.master | tojson }}</pre>
          <strong>Duplicates:</strong>
          <pre>{{ item.duplicates | tojson }}</pre>
        </div>
        <hr>
      {% endfor %}
    {% endif %}
  </body>
</html>
